<div class="p-6 space-y-6 bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen md:p-8">
  
  <!-- Loading Spinner -->
  <div *ngIf="isLoading()" class="fixed inset-0 bg-white/80 backdrop-blur-sm z-50 flex items-center justify-center">
    <div class="flex flex-col items-center space-y-4">
      <div class="w-12 h-12 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin"></div>
      <div class="text-lg font-medium text-gray-700">Loading Dashboard...</div>
    </div>
  </div>

  <!-- Clock Card -->
  <div class="bg-white/70 backdrop-blur-xl rounded-2xl p-6 shadow-xl border border-white/50">
    <div class="text-center">
      <div class="text-4xl md:text-5xl font-black bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2 tracking-tight">
        {{ currentTime() | date:'HH:mm:ss' }}
      </div>
      <div class="text-sm text-gray-600 font-medium tracking-wide">
        {{ currentTime() | date:'EEEE, MMMM d, yyyy' }}
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="grid grid-cols-2 gap-4">
    <button (click)="handleCheckInOut()" 
            class="group relative overflow-hidden rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 flex flex-col items-center justify-center text-white min-h-[120px]"
            [ngClass]="isCheckedIn ? 'bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700' : 'bg-gradient-to-br from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700'">
      <div class="text-3xl mb-3 transform group-hover:scale-110 transition-transform">
        {{ isCheckedIn ? 'üö™' : 'üìç' }}
      </div>
      <div class="font-bold text-lg tracking-wide">
        {{ isCheckedIn ? 'Check Out' : 'Check In' }}
      </div>
      <div class="text-xs opacity-90 mt-1 font-medium">
        {{ isCheckedIn ? 'End shift' : 'Start shift' }}
      </div>
    </button>

    <button (click)="handleEmergency()" 
            class="bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 flex flex-col items-center justify-center text-white min-h-[120px] group">
      <div class="text-3xl mb-3 animate-bounce group-hover:animate-none">
        üö®
      </div>
      <div class="font-bold text-lg tracking-wide">Emergency</div>
      <div class="text-xs opacity-90 mt-1 font-medium">SOS Button</div>
    </button>
  </div>

  <!-- Today's Attendance -->
  <div class="bg-white/70 backdrop-blur-xl rounded-2xl p-6 shadow-xl border border-white/50">
    <div class="flex items-center mb-4">
      <div class="w-3 h-3 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full mr-3"></div>
      <h3 class="text-xl font-bold text-gray-900 tracking-tight">Today's Attendance</h3>
    </div>
    
    <div class="space-y-4">
      <div class="flex justify-between items-center p-4 bg-gradient-to-r from-emerald-50 to-blue-50 rounded-xl">
        <span class="text-gray-700 font-medium">Status:</span>
        <span class="px-4 py-2 rounded-full font-bold text-sm tracking-wide"
              [ngClass]="isCheckedIn ? 'bg-emerald-100 text-emerald-800' : 'bg-gray-100 text-gray-500'">
          {{ isCheckedIn ? '‚úÖ Checked In' : '‚è≥ Not Started' }}
        </span>
      </div>

      <ng-container *ngIf="isCheckedIn">
        <div class="grid grid-cols-2 gap-4">
          <div class="space-y-1">
            <span class="text-xs text-gray-500 font-medium uppercase tracking-wide">Check In</span>
            <div class="font-mono text-sm font-bold text-gray-900">
              {{ todayAttendance()?.checkInTime | date:'shortTime' }}
            </div>
          </div>
          
          <div *ngIf="todayAttendance()?.checkOutTime" class="space-y-1">
            <span class="text-xs text-gray-500 font-medium uppercase tracking-wide">Check Out</span>
            <div class="font-mono text-sm font-bold text-gray-900">
              {{ todayAttendance()?.checkOutTime | date:'shortTime' }}
            </div>
          </div>
        </div>

        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-xl border border-blue-100">
          <div class="flex justify-between items-center">
            <span class="text-gray-700 font-medium">Hours Worked:</span>
            <span class="text-2xl font-black bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
              {{ calculateHoursWorked() }}h
            </span>
          </div>
        </div>
      </ng-container>
    </div>
  </div>

  <!-- Targets Widget (NEW) -->
  <app-targets-widget></app-targets-widget>

  <!-- Tasks Overview -->
  <div *ngIf="tasksSummary(); let tasks" class="bg-white/70 backdrop-blur-xl rounded-2xl p-6 shadow-xl border border-white/50">
    <div class="flex items-center mb-6">
      <div class="w-3 h-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-full mr-3"></div>
      <h3 class="text-xl font-bold text-gray-900 tracking-tight">Tasks Overview</h3>
    </div>
    
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <div class="group p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 hover:from-blue-50 hover:to-indigo-50 transition-all border hover:border-blue-200 cursor-pointer">
        <div class="text-2xl font-black text-blue-600 mb-1">{{ tasks.pending }}</div>
        <div class="text-xs font-medium text-gray-600 uppercase tracking-wide">Pending</div>
      </div>
      
      <div class="group p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 hover:from-orange-50 hover:to-yellow-50 transition-all border hover:border-orange-200 cursor-pointer">
        <div class="text-2xl font-black text-orange-600 mb-1">{{ tasks.inProgress }}</div>
        <div class="text-xs font-medium text-gray-600 uppercase tracking-wide">In Progress</div>
      </div>
      
      <div class="group p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 hover:from-emerald-50 hover:to-teal-50 transition-all border hover:border-emerald-200 cursor-pointer">
        <div class="text-2xl font-black text-emerald-600 mb-1">{{ tasks.completed }}</div>
        <div class="text-xs font-medium text-gray-600 uppercase tracking-wide">Completed</div>
      </div>
      
      <div class="group p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 hover:from-red-50 hover:to-rose-50 transition-all border hover:border-red-200 cursor-pointer">
        <div class="text-2xl font-black text-red-600 mb-1">{{ tasks.overdue }}</div>
        <div class="text-xs font-medium text-gray-600 uppercase tracking-wide">Overdue</div>
      </div>
    </div>
  </div>

  <!-- Monthly Summary -->
  <div *ngIf="attendanceSummary(); let summary" class="bg-white/70 backdrop-blur-xl rounded-2xl p-6 shadow-xl border border-white/50">
    <div class="flex items-center mb-6">
      <div class="w-3 h-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mr-3"></div>
      <h3 class="text-xl font-bold text-gray-900 tracking-tight">This Month</h3>
    </div>
    
    <div class="grid grid-cols-2 gap-6">
      <div class="text-center p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200">
        <div class="text-3xl font-black text-purple-700 mb-2">{{ summary.presentDays }}</div>
        <div class="text-sm font-medium text-gray-700 uppercase tracking-wide">Present Days</div>
      </div>
      
      <div class="text-center p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200">
        <div class="text-3xl font-black text-blue-700 mb-2">{{ summary.totalHours | number:'1.0-0' }}</div>
        <div class="text-sm font-medium text-gray-700 uppercase tracking-wide">Total Hours</div>
      </div>
    </div>
  </div>

  <!-- Refresh Button -->
  <div class="flex justify-center pt-4">
    <button (click)="refreshData()" 
            class="px-8 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-0.5">
      üîÑ Refresh Data
    </button>
  </div>
</div>